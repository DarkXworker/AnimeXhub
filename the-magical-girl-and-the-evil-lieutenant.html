<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Magical Girl and The Evil Lieutenant ‚Äì AnimeX TV</title>
  <meta name="description" content="Watch & download The Magical Girl and The Evil Lieutenant (Sub/Dub). Auto-filled from AniList." />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --bg: url('https://files.catbox.moe/j99417.jpg');
      --brand: #66fcf1;
      --gold: #ffd54a;
    }
    body {
      font-family: 'Poppins', sans-serif;
      color: #fff;
      background: var(--bg) no-repeat center center/cover;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      min-height: 100vh;
    }
    .content {
      background: linear-gradient(to top, rgba(0,0,0,.92), rgba(0,0,0,0));
      padding: 40px 20px;
      text-align: center;
    }
    h1 {
      font-size: 32px;
      font-weight: 600;
      color: var(--brand);
      margin-bottom: 10px;
    }
    .sub-info {
      font-size: 14px;
      color: #ddd;
      margin-bottom: 6px;
    }
    .rating {
      color: var(--gold);
      font-size: 15px;
      margin: 10px 0 22px;
    }
    .btn-group {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 16px;
      margin-bottom: 25px;
    }
    .btn {
      padding: 12px 20px;
      border: none;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: .25s;
      display: flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
    }
    .btn.download {
      background: #ffa500;
      color: #000;
    }
    .btn.download:hover {
      transform: translateY(-1px);
      filter: brightness(1.05);
    }
    .btn.tutorial {
      background: #ff4d6d;
      color: #fff;
    }
    .btn.tutorial:hover {
      transform: translateY(-1px);
      filter: brightness(1.05);
    }
    .btn.copy {
      background: #2dd4bf;
      color: #062;
    }
    .story {
      font-size: 15px;
      line-height: 1.65;
      max-width: 760px;
      margin: 0 auto;
      background: rgba(0,0,0,.7);
      padding: 20px;
      border-radius: 12px;
      text-align: left;
    }
    .meta {
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
      margin: 10px 0 18px;
    }
    .chip {
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.12);
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
    }
    footer {
      text-align: center;
      color: #bbb;
      font-size: 12px;
      padding: 18px 0 8px;
    }
    @media (max-width: 600px) {
      h1 { font-size: 26px; }
      .story { font-size: 14px; }
    }
  </style>
</head>
<body>
  <div class="content" role="main">
    <h1 id="title">The Magical Girl and The Evil Lieutenant</h1>
    <div class="sub-info" id="subdub">üì∫ Sub | Dub ¬∑ Auto</div>
    <div class="meta" id="genresWrap" aria-label="Genres"></div>
    <div class="rating" id="rating">‚≠ê Loading rating‚Ä¶</div>
    <div class="btn-group">
      <a href="https://t.me/+Zu4mqFjUWzQwZGNl" class="btn download" id="downloadBtn" rel="nofollow noopener">üìÇ Download All Episodes (Hindi)</a>
      <a href="https://t.me/download_Tutorialx/77" class="btn tutorial" rel="nofollow noopener">‚ùì How to Download</a>
      <button class="btn copy" id="copyBtn" type="button">üìã Copy Page Info</button>
    </div>
    <article class="story" id="synopsis">Fetching synopsis‚Ä¶</article>
  </div>
  <footer>
    <span id="footerTitle">The Magical Girl and The Evil Lieutenant</span> ¬∑ <span id="year"></span>
  </footer>
  <script>
    const $ = s => document.querySelector(s);
    const stripHTML = h => h.replace(/<br\\s*\\/?>(<br\\s*\\/?>)*/gi, '\\n').replace(/<[^>]+>/g, '').replace(/&nbsp;/g, ' ').replace(/&amp;/g, '&').replace(/&quot;/g, '"').replace(/&#39;/g, "'").trim();

    const CONFIG = {
      title: 'The Magical Girl and The Evil Lieutenant',
      image: 'https://files.catbox.moe/j99417.jpg',
      download: 'https://t.me/+Zu4mqFjUWzQwZGNl',
      lang: 'üì∫ Sub | Dub',
    };

    document.title = CONFIG.title + ' - AnimeX TV';
    document.documentElement.style.setProperty('--bg', `url('${CONFIG.image}')`);
    $('#downloadBtn').href = CONFIG.download;
    $('#subdub').textContent = CONFIG.lang + ' ¬∑ Auto';
    $('#footerTitle').textContent = CONFIG.title;
    $('#year').textContent = new Date().getFullYear();

    $('#copyBtn').addEventListener('click', () => {
      const genres = [...document.querySelectorAll('.chip')].map(e => e.textContent).join(', ');
      const text = `${CONFIG.title}\n${$('#subdub').textContent}\n${$('#rating').textContent}\nGenres: ${genres}\n\n${$('#synopsis').textContent}`;
      navigator.clipboard.writeText(text).then(() => {
        $('#copyBtn').textContent = '‚úÖ Copied';
        setTimeout(() => $('#copyBtn').textContent = 'üìã Copy Page Info', 1400);
      });
    });

    async function fetchAniList(title) {
      const query = `
        query ($search: String) {
          Media(type: ANIME, search: $search) {
            title { romaji english native }
            description(asHtml: true)
            genres
            averageScore
            seasonYear
            bannerImage
            coverImage { extraLarge }
          }
        }`;
      const res = await fetch('https://graphql.anilist.co', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
        body: JSON.stringify({ query, variables: { search: title } })
      });
      if (!res.ok) throw new Error('AniList fetch failed');
      const json = await res.json();
      return json.data.Media || null;
    }

    (async () => {
      $('#title').textContent = CONFIG.title;
      try {
        const data = await fetchAniList(CONFIG.title + ' Used to Be Archenemies');
        if (!data) throw 0;
        const best = data.title.english || data.title.romaji || CONFIG.title;
        $('#title').textContent = best;
        $('#footerTitle').textContent = best;
        $('#genresWrap').innerHTML = data.genres.map(g => `<span class="chip">${g}</span>`).join('');
        $('#rating').textContent = data.averageScore ? `‚≠ê ${data.averageScore}/100 (AniList)` : '‚≠ê ‚Äî (No official rating)';
        $('#synopsis').textContent = stripHTML(data.description) || 'Synopsis not available.';
        if (data.seasonYear) $('#year').textContent = data.seasonYear;
        if (!CONFIG.image) {
          const bg = data.bannerImage || data.coverImage?.extraLarge;
          if (bg) document.documentElement.style.setProperty('--bg', `url('${bg}')`);
        }
      } catch (e) {
        $('#genresWrap').innerHTML = '<span class="chip">Fantasy</span><span class="chip">Romance</span>';
        $('#rating').innerHTML = '‚≠ê ‚Äî <span style="opacity:.8">(No official rating)</span>';
        $('#synopsis').textContent = 'Details could not be fetched right now.';
        console.warn(e);
      }
    })();
  </script>
</body>
</html>
